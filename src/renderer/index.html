<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' https://cdnjs.cloudflare.com; style-src 'self' 'unsafe-inline' https://cdnjs.cloudflare.com; 
                 img-src 'self' data: https:; connect-src 'self' https://api.openai.com https://api.github.com http://localhost:7777 http://127.0.0.1:7777;
                 font-src 'self' https://cdnjs.cloudflare.com; frame-src 'none'; object-src 'none'; base-uri 'self';">
    <title>KayraDeniz Bada≈ü - Kod Canavarƒ±</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Use stable Prism.js version with dark theme -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.28.0/themes/prism-dark.min.css">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="elysion-chamber-ui.css">
    <link rel="stylesheet" href="elysion-chamber-ui-polish.css">
</head>

<body>
    <div id="notificationContainer" class="notification-container" aria-live="polite" aria-atomic="true"></div>
    <div class="app-container">

        <!-- Header -->
        <header class="header">
            <div class="header-left">
                <div class="logo">
                    <i class="fas fa-dragon"></i>
                    <span>KayraDeniz Kod Canavarƒ±</span>
                </div>
            </div>

            <div class="header-center">
                <div class="window-controls">
                    <!-- Window controls will be handled by Electron -->
                </div>

                <!-- Top AI Controls (API Key, Model, Temperature) -->
                <div class="top-ai-controls" id="topAiControls">
                    <!-- ‚ú® OpenAI API Key -->
                    <div class="top-ai-item">
                        <input type="password" id="topApiKey" placeholder="OpenAI Key sk-..." class="top-api-input"
                            title="OpenAI API Key" aria-label="OpenAI API Key">
                        <button class="save-btn" id="topSaveApiKey" title="Kaydet OpenAI Key">
                            <i class="fas fa-save"></i>
                        </button>
                    </div>
                    
                    <!-- ‚ú® Claude API Key -->
                    <div class="top-ai-item">
                        <input type="password" id="topClaudeApiKey" placeholder="Claude Key sk-ant-..." class="top-api-input"
                            title="Claude API Key" aria-label="Claude API Key">
                        <button class="save-btn" id="topSaveClaudeApiKey" title="Kaydet Claude Key">
                            <i class="fas fa-save"></i>
                        </button>
                    </div>

                    <div class="top-ai-item">
                        <select id="topModelSelect" class="config-select" aria-label="OpenAI modeli se√ß"
                            title="OpenAI modeli se√ß">
                            <!-- üí∞ Ekonomik Modeller (Test & Development) -->
                            <optgroup label="üí∞ Ekonomik - Test/Geli≈ütirme">
                                <option value="gpt-4o-mini">GPT-4o Mini ‚ö° (√áok Ucuz)</option>
                                <option value="gpt-3.5-turbo">GPT-3.5 Turbo üí∞ (Ekonomik)</option>
                            </optgroup>
                            
                            <!-- üöÄ Production Modeller -->
                            <optgroup label="üöÄ Production - G√º√ßl√º Modeller">
                                <option value="gpt-4o">GPT-4o (Hƒ±zlƒ± & G√º√ßl√º)</option>
                                <option value="gpt-4-turbo">GPT-4 Turbo (Dengeli)</option>
                                <option value="gpt-4">GPT-4 (Klasik)</option>
                            </optgroup>
                        </select>
                    </div>

                    <div class="top-ai-item">
                        <input type="range" id="topTemperature" min="0" max="1" step="0.1" value="0.7"
                            class="slider top-slider" aria-label="Yaratƒ±cƒ±lƒ±k" title="Yaratƒ±cƒ±lƒ±k">
                        <span class="slider-value" id="topTempValue">0.7</span>
                    </div>
                </div>
            </div>

            <div class="header-right">
                <button class="header-btn theme-toggle-btn" id="themeToggleBtn" title="Tema Deƒüi≈ütir">
                    <i class="fas fa-palette"></i>
                    <span class="theme-name">Dragon</span>
                </button>
                <button class="header-btn agent-mode-btn" id="agentModeBtn" title="AI Agent Modu">
                    <i class="fas fa-robot"></i>
                    <span class="agent-status">PASƒ∞F</span>
                </button>
                <!-- üîì Developer Mode Toggle -->
                <button class="header-btn developer-mode-btn" id="developerModeBtn" title="Developer Mode (Auto-approve all)">
                    <i class="fas fa-code"></i>
                    <span class="dev-mode-status">DEV: OFF</span>
                </button>
                <button class="header-btn" id="settingsBtn" title="Ayarlar">
                    <i class="fas fa-cog"></i>
                </button>
                <button class="header-btn" id="aboutBtn" title="Hakkƒ±nda">
                    <i class="fas fa-info-circle"></i>
                </button>
            </div>
        </header>

        <!-- Main Layout -->
        <div class="main-layout">

            <!-- Left Sidebar -->
            <div class="sidebar left-sidebar">

                <!-- File Explorer (moved to left) -->
                <div class="file-explorer">
                    <div class="sidebar-header">
                        <h3><i class="fas fa-folder-tree"></i> Dosya Gezgini</h3>
                        <div class="explorer-actions">
                            <button class="back-btn" id="explorerBackBtn" title="Geri" disabled>
                                <i class="fas fa-arrow-left"></i>
                            </button>
                            <button class="up-btn" id="explorerUpBtn" title="√úst Klas√∂r" disabled>
                                <i class="fas fa-level-up-alt"></i>
                            </button>
                            <button class="refresh-btn" id="refreshExplorer" title="Yenile">
                                <i class="fas fa-sync-alt"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Breadcrumb Navigation -->
                    <div class="breadcrumb-nav" id="breadcrumbNav">
                        <div class="breadcrumb-item" data-path="">
                            <i class="fas fa-home"></i>
                        </div>
                    </div>

                    <div class="explorer-content">
                        <div class="folder-tree" id="folderTree">
                            <div class="empty-state">
                                <i class="fas fa-folder-open"></i>
                                <p>Klas√∂r se√ßili deƒüil</p>
                                <button class="select-folder-btn" id="selectFolderBtn">
                                    <i class="fas fa-folder"></i> Klas√∂r Se√ß
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Agent Mode Panel -->
                <div class="agent-mode-panel" id="agentModePanel">
                    <div class="sidebar-header">
                        <h3><i class="fas fa-robot"></i> AI Asistan</h3>
                        <div class="agent-mode-controls">
                            <button class="agent-mode-toggle" id="agentModeToggle" title="Agent Mode">
                                <i class="fas fa-power-off"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Quick Start Templates - Always Visible -->
                    <div class="quick-start-templates">
                        <h5>‚ö° Hƒ±zlƒ± Proje Ba≈ülangƒ±√ß Sihirbazƒ±</h5>
                        <p class="template-description">Projenizi hƒ±zla ba≈ülatƒ±n. Saƒü taraftaki chat'ten de √∂zel g√∂revler tanƒ±mlayabilirsiniz.</p>
                        <div class="template-grid" id="quickTemplateGrid"></div>
                        <button class="template-manage-btn" id="addTemplateBtn">
                            <i class="fas fa-plus-circle"></i>
                            <span>Yeni ≈ûablon Ekle</span>
                        </button>
                    </div>

                    <!-- Agent Progress -->
                    <div class="agent-progress hidden" id="agentProgress">
                        <div class="progress-header">
                            <h5>üîÑ AI Agent √áalƒ±≈üƒ±yor...</h5>
                            <button class="stop-agent-btn" id="stopAgentBtn" title="Agent'ƒ± Durdur">
                                <i class="fas fa-stop"></i>
                            </button>
                        </div>
                        <div class="progress-steps" id="agentSteps"></div>
                    </div>

                    <!-- üéØ REAL-TIME AGENT VISUALIZATION -->
                    <div class="agent-live-view hidden" id="agentLiveView">
                        <div class="live-view-header">
                            <h5><i class="fas fa-eye"></i> Canlƒ± ƒ∞zleme</h5>
                            <button class="minimize-live-btn" id="minimizeLiveBtn" title="K√º√ß√ºlt">
                                <i class="fas fa-minus"></i>
                            </button>
                        </div>

                        <!-- Current Operation Display -->
                        <div class="current-operation" id="currentOperation">
                            <div class="operation-icon">
                                <i class="fas fa-spinner fa-spin"></i>
                            </div>
                            <div class="operation-details">
                                <div class="operation-type">Bekliyor...</div>
                                <div class="operation-target">-</div>
                            </div>
                        </div>

                        <!-- Progress Timeline -->
                        <div class="progress-timeline" id="progressTimeline">
                            <div class="timeline-item completed">
                                <div class="timeline-dot"></div>
                                <div class="timeline-content">
                                    <span class="timeline-step">Ba≈ülatƒ±ldƒ±</span>
                                    <span class="timeline-time">0.0s</span>
                                </div>
                            </div>
                        </div>

                        <!-- File Changes Stats -->
                        <div class="file-changes-stats" id="fileChangesStats">
                            <div class="stats-header">
                                <i class="fas fa-code"></i> Dosya Deƒüi≈üiklikleri
                            </div>
                            <div class="stats-content">
                                <div class="stat-item">
                                    <span class="stat-label">Eklenen:</span>
                                    <span class="stat-value additions" id="linesAdded">+0</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-label">Silinen:</span>
                                    <span class="stat-value deletions" id="linesDeleted">-0</span>
                                </div>
                                <div class="stat-item">
                                    <span class="stat-label">Dosya:</span>
                                    <span class="stat-value" id="filesChanged">0</span>
                                </div>
                            </div>
                        </div>

                        <!-- Modified Files List -->
                        <div class="modified-files-list" id="modifiedFilesList">
                            <div class="files-header">
                                <i class="fas fa-folder-open"></i> Deƒüi≈ütirilen Dosyalar
                            </div>
                            <div class="files-content" id="filesContent">
                                <div class="empty-files">Hen√ºz dosya deƒüi≈üikliƒüi yok</div>
                            </div>
                        </div>

                        <!-- Execution Metrics -->
                        <div class="execution-metrics" id="executionMetrics">
                            <div class="metric-row">
                                <span class="metric-label"><i class="fas fa-clock"></i> Toplam S√ºre:</span>
                                <span class="metric-value" id="totalDuration">0.0s</span>
                            </div>
                            <div class="metric-row">
                                <span class="metric-label"><i class="fas fa-check-circle"></i> Ba≈üarƒ±lƒ±:</span>
                                <span class="metric-value success" id="successCount">0</span>
                            </div>
                            <div class="metric-row">
                                <span class="metric-label"><i class="fas fa-times-circle"></i> Hatalƒ±:</span>
                                <span class="metric-value error" id="errorCount">0</span>
                            </div>
                        </div>
                    </div>
                </div>

            </div>

            <!-- Left Resizer -->
            <div class="resizer left-resizer" data-direction="horizontal"></div>

            <!-- Center Area -->
            <div class="center-area">

                <!-- Editor Section -->
                <div class="editor-section">
                    <!-- Tab Bar -->
                    <div class="tab-bar">
                        <div class="tabs-container" id="tabsContainer">
                            <div class="tab active" data-file="welcome">
                                <span class="tab-icon"><i class="fas fa-home"></i></span>
                                <span class="tab-title">Ho≈ü Geldin</span>
                                <button class="tab-close" title="Kapat">√ó</button>
                            </div>
                        </div>
                        <button class="new-tab-btn" id="newTabBtn" title="Yeni Dosya">
                            <i class="fas fa-plus"></i>
                        </button>
                    </div>

                    <!-- Content Area -->
                    <div class="content-area">

                        <!-- Welcome Screen -->
                        <div class="welcome-screen" id="welcomeScreen">
                            <div class="welcome-content">
                                <div class="dragon-animation">
                                    <i class="fas fa-dragon"></i>
                                </div>
                                <h2>KayraDeniz Bada≈ü <span class="gradient-text">Kod Canavarƒ±</span></h2>
                                <p>AI destekli kod √ºretimi ve dosya y√∂netimi i√ßin modern desktop uygulamasƒ±</p>

                                <div class="welcome-actions">
                                    <button class="welcome-btn primary" id="openFileBtn">
                                        <i class="fas fa-folder-open"></i>
                                        Dosya A√ß
                                    </button>
                                    <button class="welcome-btn" id="newFileBtn">
                                        <i class="fas fa-file-plus"></i>
                                        Yeni Dosya
                                    </button>
                                    <button class="welcome-btn" id="openFolderBtn">
                                        <i class="fas fa-folder"></i>
                                        Klas√∂r A√ß
                                    </button>
                                </div>

                                <div class="recent-files">
                                    <h3>Son Kullanƒ±lan Dosyalar</h3>
                                    <div class="recent-list" id="recentList">
                                        <div class="empty-state">
                                            <i class="fas fa-clock"></i>
                                            <p>Hen√ºz dosya a√ßƒ±lmamƒ±≈ü</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Code Editor Area -->
                        <div class="editor-area hidden" id="editorArea">
                            <div class="editor-toolbar">
                                <div class="editor-info">
                                    <span class="file-name" id="fileName">untitled.txt</span>
                                    <span class="file-path" id="filePath"></span>
                                </div>
                                <div class="editor-actions">
                                    <button class="editor-btn" id="saveBtn" title="Kaydet (Ctrl+S)">
                                        <i class="fas fa-save"></i>
                                    </button>
                                    <button class="editor-btn" id="saveAsBtn" title="Farklƒ± Kaydet">
                                        <i class="fas fa-file-export"></i>
                                    </button>
                                    <button class="editor-btn" id="copyBtn" title="Kopyala">
                                        <i class="fas fa-copy"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="editor-container">
                                <!-- Line Numbers -->
                                <div id="lineNumbers" class="line-numbers"></div>
                                
                                <!-- Code Folding Icons -->
                                <div id="foldIcons" class="fold-icons"></div>
                                
                                <!-- Editor Wrapper (for indent guides + editor) -->
                                <div class="editor-wrapper">
                                    <!-- Indent Guides (VS Code style) -->
                                    <div id="indentGuides" class="indent-guides"></div>
                                    
                                    <!-- Code Editor -->
                                    <textarea id="codeEditor" class="code-editor"
                                        placeholder="Kodunuzu buraya yazƒ±n veya AI'dan yardƒ±m isteyin..."></textarea>
                                    <pre id="codeHighlight" class="code-highlight"><code></code></pre>
                                </div>
                                
                                <!-- Minimap -->
                                <div id="minimap" class="minimap-container">
                                    <canvas id="minimapCanvas" class="minimap-canvas"></canvas>
                                    <div id="minimapViewport" class="minimap-viewport"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Bottom Resizer -->
                <div class="resizer bottom-resizer" data-direction="vertical"></div>

                <!-- Terminal Section -->
                <div class="terminal-section">
                    <div class="terminal-header">
                        <div class="terminal-tabs">
                            <div class="terminal-tab active">
                                <i class="fas fa-terminal"></i>
                                <span>Terminal</span>
                            </div>
                        </div>
                        <div class="terminal-controls">
                            <button class="terminal-btn" id="clearTerminalBtn" title="Temizle">
                                <i class="fas fa-trash"></i>
                            </button>
                            <button class="terminal-btn" id="newTerminalBtn" title="Yeni Terminal">
                                <i class="fas fa-plus"></i>
                            </button>
                            <button class="terminal-btn" id="toggleTerminalBtn" title="Terminal'i Gizle/G√∂ster">
                                <i class="fas fa-window-minimize"></i>
                            </button>
                        </div>
                    </div>

                    <div class="terminal-content">
                        <div class="terminal-output" id="terminalOutput"></div>
                        <div class="terminal-input-container">
                            <div class="terminal-prompt">
                                <span class="prompt-path" id="terminalPath">~</span>
                                <span class="prompt-symbol">></span>
                            </div>
                            <input type="text" id="terminalInput" class="terminal-input" placeholder="Komut girin...">
                            <button class="run-btn" id="runCommandBtn" title="√áalƒ±≈ütƒ±r">
                                <i class="fas fa-play"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right Resizer -->
            <div class="resizer right-resizer" data-direction="horizontal"></div>

            <!-- Right Sidebar -->
            <div class="sidebar right-sidebar">

                <!-- AI Chat Panel -->
                <div class="ai-chat-panel">
                    <div class="sidebar-header">
                        <h3><i class="fas fa-comments"></i> AI Chat</h3>
                        <div class="chat-header-controls">
                            <button class="summary-btn" id="summaryBtn" title="Konu≈üma √ñzeti">
                                <i class="fas fa-chart-bar"></i>
                            </button>
                            <button class="clear-chat-btn" id="clearChatBtn" title="Sohbeti Temizle">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>

                    <div class="chat-content">
                        <div class="chat-messages" id="chatMessages">
                            <div class="chat-message system">
                                <div class="message-content">
                                    <i class="fas fa-dragon"></i>
                                    <p>Merhaba! Ben KayraDeniz Kod Canavarƒ±. Size nasƒ±l yardƒ±mcƒ± olabilirim?</p>
                                </div>
                                <div class="message-time">Az √∂nce</div>
                            </div>
                        </div>

                        <div class="chat-input-container">
                            <div class="chat-input-left">
                                <!-- ‚ú® Provider Selection (OpenAI / Claude) -->
                                <div class="provider-dropdown">
                                    <select id="llmProviderSelect" title="AI Provider">
                                        <option value="openai">ü§ñ OpenAI</option>
                                        <option value="anthropic">üß† Claude</option>
                                    </select>
                                </div>
                                
                                <!-- ‚ú® Model Selection -->
                                <div class="model-dropdown">
                                    <select id="llmModelSelect" title="Model">
                                        <!-- OpenAI Models -->
                                        <optgroup label="ü§ñ OpenAI - Ekonomik" id="openaiEconomicGroup">
                                            <option value="gpt-4o-mini">GPT-4o Mini ‚ö°</option>
                                            <option value="gpt-3.5-turbo">GPT-3.5 Turbo üí∞</option>
                                        </optgroup>
                                        <optgroup label="ü§ñ OpenAI - Production" id="openaiProductionGroup">
                                            <option value="gpt-4o">GPT-4o</option>
                                            <option value="gpt-4-turbo">GPT-4 Turbo</option>
                                            <option value="gpt-4">GPT-4</option>
                                        </optgroup>
                                        
                                        <!-- Claude Models -->
                                        <optgroup label="üß† Claude - Ekonomik" id="claudeEconomicGroup" class="hidden">
                                            <option value="claude-3-haiku-20240307">Claude 3 Haiku ‚ö°</option>
                                        </optgroup>
                                        <optgroup label="üß† Claude - Dengeli" id="claudeBalancedGroup" class="hidden">
                                            <option value="claude-3-5-sonnet-20241022">Claude 3.5 Sonnet üéØ</option>
                                            <option value="claude-3-sonnet-20240229">Claude 3 Sonnet</option>
                                        </optgroup>
                                        <optgroup label="üß† Claude - Production" id="claudeProductionGroup" class="hidden">
                                            <option value="claude-3-opus-20240229">Claude 3 Opus üöÄ</option>
                                        </optgroup>
                                    </select>
                                </div>
                                
                                <!-- ‚ú® Tools Toggle -->
                                <div class="tools-toggle">
                                    <label title="Enable MCP Tools (File, Shell, Git)">
                                        <input type="checkbox" id="toolsEnabledCheckbox" />
                                        <span class="toggle-label">üîß Tools</span>
                                    </label>
                                </div>
                                
                                <!-- AI Mode Dropdown (moved into chat area) -->
                                <div class="ai-mode-dropdown">
                                    <select id="chatAiModeSelect" title="AI Modu">
                                        <option value="ask">Ask Mode</option>
                                        <option value="agent">Agent Mode</option>
                                    </select>
                                </div>

                                <!-- AG2-Inspired Agent Role Selector -->
                                <div class="agent-role-dropdown hidden" id="agentRoleDropdown">
                                    <select id="agentRoleSelect" title="Agent Rol√º">
                                        <option value="coordinator">üéØ Koordinat√∂r</option>
                                        <option value="analyzer">üîç Kod Analiz</option>
                                        <option value="generator">‚ö° Kod √úretim</option>
                                        <option value="documentation">üìö Dok√ºmantasyon</option>
                                        <option value="artist">üé® G√∂rsel ƒ∞√ßerik</option>
                                    </select>
                                </div>
                            </div>

                            <div class="chat-input-wrapper">
                                <textarea id="chatInput" placeholder="AI'ya bir soru sorun..." rows="2"></textarea>
                                <div class="prompt-actions">
                                    <div class="router-status" id="routerStatus"
                                        title="Router Agent - Otomatik Rol Se√ßimi">
                                        <i class="fas fa-robot"></i>
                                        <span id="currentRole">Auto</span>
                                    </div>
                                    <button class="send-btn" id="sendChatBtn" title="G√∂nder">
                                        <i class="fas fa-paper-plane"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>

        </div>

        <!-- Context Menu -->
        <div class="context-menu hidden" id="contextMenu">
            <div class="context-menu-item" data-action="open">
                <i class="fas fa-external-link-alt"></i> A√ß
            </div>
            <div class="context-menu-item" data-action="preview">
                <i class="fas fa-eye"></i> √ñnizle
            </div>
            <div class="context-menu-separator"></div>
            <div class="context-menu-item" data-action="rename">
                <i class="fas fa-edit"></i> Yeniden Adlandƒ±r
            </div>
            <div class="context-menu-item" data-action="duplicate">
                <i class="fas fa-copy"></i> Kopyala
            </div>
            <div class="context-menu-separator"></div>
            <div class="context-menu-item" data-action="new-file">
                <i class="fas fa-file-plus"></i> Yeni Dosya
            </div>
            <div class="context-menu-item" data-action="new-folder">
                <i class="fas fa-folder-plus"></i> Yeni Klas√∂r
            </div>
            <div class="context-menu-separator"></div>
            <div class="context-menu-item danger" data-action="delete">
                <i class="fas fa-trash"></i> Sil
            </div>
        </div>

        <!-- File Drag Overlay -->
        <div class="drag-overlay hidden" id="dragOverlay">
            <div class="drag-content">
                <i class="fas fa-cloud-upload-alt"></i>
                <h3>Dosyalarƒ± buraya s√ºr√ºkleyin</h3>
                <p>Dosyalar otomatik olarak i√ße aktarƒ±lacak</p>
            </div>
        </div>

        <!-- Custom Template Modal -->
        <div class="modal custom-template-modal hidden" id="customTemplateModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3><i class="fas fa-plus-circle"></i> √ñzel ≈ûablon Olu≈ütur</h3>
                    <button class="modal-close" id="closeCustomTemplateModal">&times;</button>
                </div>
                <form id="customTemplateForm">
                    <div class="modal-body">
                        <div class="form-group">
                            <label for="customTemplateLabel">Buton Etiketi</label>
                            <input type="text" id="customTemplateLabel" placeholder="√ñrn: Backend Audit" required>
                        </div>
                        <div class="form-group">
                            <label for="customTemplateTitle">Ba≈ülƒ±k</label>
                            <input type="text" id="customTemplateTitle" placeholder="≈ûablon ba≈ülƒ±ƒüƒ±" required>
                        </div>
                        <div class="form-group">
                            <label for="customTemplateDescription">A√ßƒ±klama / Prompt</label>
                            <textarea id="customTemplateDescription" rows="4" placeholder="AI'ya g√∂nderilecek detaylƒ± talimat" required></textarea>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="customTemplateRole">Rol</label>
                                <select id="customTemplateRole">
                                    <option value="generator">‚ö° Kod √úretim</option>
                                    <option value="analyzer">üîç Kod Analiz</option>
                                    <option value="documentation">üìö Dok√ºmantasyon</option>
                                    <option value="coordinator">üéØ Koordinat√∂r</option>
                                    <option value="artist">üé® G√∂rsel ƒ∞√ßerik</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="customTemplateIcon">ƒ∞kon (Font Awesome)</label>
                                <input type="text" id="customTemplateIcon" placeholder="fas fa-star">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="customTemplateProjectType">Proje T√ºr√º</label>
                                <input type="text" id="customTemplateProjectType" placeholder="√ñrn: react, nodejs, custom">
                            </div>
                            <div class="form-group checkbox-group">
                                <label>
                                    <input type="checkbox" id="customTemplateSetup">
                                    <span>Proje kurulumu ba≈ülat</span>
                                </label>
                                <label>
                                    <input type="checkbox" id="customTemplateWizard">
                                    <span>Geli≈ümi≈ü sihirbaz kullan</span>
                                </label>
                            </div>
                        </div>
                        <div class="custom-template-list" id="customTemplateList"></div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn secondary" id="cancelCustomTemplate">ƒ∞ptal</button>
                        <button type="submit" class="btn primary" id="saveCustomTemplate">Kaydet</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Settings Modal -->
        <div class="modal settings-modal hidden" id="settingsModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3><i class="fas fa-sliders-h"></i> Genel Ayarlar</h3>
                    <button class="modal-close" id="closeSettingsModal">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="settings-section">
                        <h4>‚öôÔ∏è Yapƒ±landƒ±rma</h4>
                        <p>Uygulama davranƒ±≈üƒ±nƒ± √ºst ara√ß √ßubuƒüundaki API anahtarƒ±, model ve sƒ±caklƒ±k kontrolleri ile anƒ±nda deƒüi≈ütirebilirsiniz. Bu panel, hangi ayarlarƒ±n aktif olduƒüunu √∂zetlemek i√ßin tasarlandƒ±.</p>
                        <ul class="settings-list">
                            <li><strong>API Anahtarƒ±:</strong> OpenAI eri≈üimini y√∂netmek i√ßin √ºstteki kilit simgesine tƒ±klayƒ±n.</li>
                            <li><strong>Model Se√ßimi:</strong> GPT-4 ve GPT-3.5 arasƒ±nda hƒ±zlƒ±ca ge√ßi≈ü yapabilirsiniz.</li>
                            <li><strong>Yaratƒ±cƒ±lƒ±k:</strong> Sƒ±caklƒ±k slider'ƒ± ile cevaplarƒ±n ne kadar √∂zg√ºn olacaƒüƒ±nƒ± ayarlayƒ±n.</li>
                        </ul>
                    </div>
                    <div class="settings-section">
                        <h4>üß† Agent Davranƒ±≈üƒ±</h4>
                        <p>Saƒü panelden Agent Modu'nu a√ßƒ±p kapatabilir, Router Agent'ƒ±n otomatik rol se√ßiminden yararlanabilirsiniz.</p>
                        <ul class="settings-list">
                            <li><strong>Agent Modu:</strong> √úst men√ºdeki robot simgesi, tam yetkili √ßalƒ±≈üma i√ßin Agent Modu'nu ba≈ülatƒ±r.</li>
                            <li><strong>Hƒ±zlƒ± ≈ûablonlar:</strong> Sol paneldeki "Yeni ≈ûablon Ekle" adƒ±mƒ±yla √∂zel g√∂revler tanƒ±mlayƒ±n.</li>
                        </ul>
                    </div>
                    <div class="settings-section">
                        <h4>üé® Tema</h4>
                        <p>"Tema Deƒüi≈ütir" butonu ile farklƒ± g√∂r√ºn√ºm profilleri arasƒ±nda ge√ßi≈ü yapabilirsiniz.</p>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn secondary" id="settingsCloseBtn">Kapat</button>
                </div>
            </div>
        </div>

        <!-- About Modal -->
        <div class="modal about-modal hidden" id="aboutModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3><i class="fas fa-info-circle"></i> Hakkƒ±nda</h3>
                    <button class="modal-close" id="closeAboutModal">&times;</button>
                </div>
                <div class="modal-body about-content">
                    <div class="app-icon">
                        <i class="fas fa-dragon"></i>
                    </div>
                    <h2>KayraDeniz Bada≈ü Kod Canavarƒ±</h2>
                    <p class="version">v1.0.0 ¬∑ Electron + AI ƒ∞≈ü Akƒ±≈üƒ±</p>
                    <p>Bu uygulama, yerel projelerinizle yapay zek√¢ destekli √ßalƒ±≈ümayƒ± kolayla≈ütƒ±rmak i√ßin geli≈ütirildi. MCP, Continue ve kendi Router Agent'ƒ±n birle≈üimiyle artist mode rozetinin sunduƒüu hazƒ±r olma bilgileri tek yerde.</p>
                    <div class="about-links">
                        <a href="https://kayradeniz.com" target="_blank" rel="noreferrer noopener">Resmi site</a>
                        <span>¬∑</span>
                        <a href="mailto:info@kayradeniz.com">ƒ∞leti≈üim</a>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn primary" id="aboutCloseBtn">Harika!</button>
                </div>
            </div>
        </div>

        <!-- üîê Elysion Chamber: Approval Gate Modal -->
        <div class="modal approval-modal hidden" id="approvalModal">
            <div class="modal-content approval-content">
                <div class="modal-header approval-header">
                    <h3><i class="fas fa-lock"></i> Approval Required</h3>
                    <span class="approval-id" id="approvalId"></span>
                </div>
                <div class="modal-body approval-body">
                    <!-- Proposal Summary -->
                    <div class="approval-section">
                        <h4><i class="fas fa-clipboard-list"></i> Operation Summary</h4>
                        <div class="proposal-summary" id="proposalSummary">
                            <div class="summary-item">
                                <span class="label">Step:</span>
                                <span class="value" id="approvalStepTitle">Loading...</span>
                            </div>
                            <div class="summary-item">
                                <span class="label">Intent:</span>
                                <span class="value" id="approvalStepIntent">Loading...</span>
                            </div>
                        </div>
                    </div>

                    <!-- Commands to Execute -->
                    <div class="approval-section">
                        <h4><i class="fas fa-terminal"></i> Commands (<span id="commandCount">0</span>)</h4>
                        <div class="command-list" id="commandList">
                            <!-- Commands will be inserted here -->
                        </div>
                    </div>

                    <!-- Files to Modify -->
                    <div class="approval-section">
                        <h4><i class="fas fa-file-code"></i> Files to Modify (<span id="fileCount">0</span>)</h4>
                        <div class="file-list" id="fileList">
                            <!-- Files will be inserted here -->
                        </div>
                    </div>

                    <!-- Policy Violations (if any) -->
                    <div class="approval-section policy-section hidden" id="policySection">
                        <h4><i class="fas fa-shield-alt"></i> Policy Warnings</h4>
                        <div class="policy-violations" id="policyViolations">
                            <!-- Violations will be inserted here -->
                        </div>
                    </div>

                    <!-- Risk Assessment -->
                    <div class="approval-section risk-section">
                        <h4><i class="fas fa-exclamation-triangle"></i> Risk Assessment</h4>
                        <div class="risk-assessment" id="riskAssessment">
                            <p>Loading...</p>
                        </div>
                    </div>

                    <!-- Probes (Validation Checks) -->
                    <div class="approval-section">
                        <h4><i class="fas fa-check-circle"></i> Validation Checks (<span id="probeCount">0</span>)</h4>
                        <div class="probe-list" id="probeList">
                            <!-- Probes will be inserted here -->
                        </div>
                    </div>
                </div>
                <div class="modal-footer approval-footer">
                    <div class="approval-actions">
                        <button class="btn btn-danger" id="denyApproval">
                            <i class="fas fa-times"></i> Deny
                        </button>
                        <button class="btn btn-success" id="approveButton">
                            <i class="fas fa-check"></i> Approve & Execute
                        </button>
                    </div>
                    <div class="approval-timeout">
                        <i class="fas fa-clock"></i> Timeout: <span id="approvalTimeout">60s</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- üîç Elysion Chamber: Probe Results Modal -->
        <div class="modal probe-modal hidden" id="probeModal">
            <div class="modal-content probe-content">
                <div class="modal-header probe-header">
                    <h3><i class="fas fa-microscope"></i> Validation Results</h3>
                    <button class="modal-close" id="closeProbeModal">&times;</button>
                </div>
                <div class="modal-body probe-body">
                    <div class="probe-summary" id="probeSummary">
                        <div class="probe-stat">
                            <span class="stat-label">Total:</span>
                            <span class="stat-value" id="probeTotal">0</span>
                        </div>
                        <div class="probe-stat success">
                            <span class="stat-label">Passed:</span>
                            <span class="stat-value" id="probePassed">0</span>
                        </div>
                        <div class="probe-stat failed">
                            <span class="stat-label">Failed:</span>
                            <span class="stat-value" id="probeFailed">0</span>
                        </div>
                    </div>
                    <div class="probe-results-list" id="probeResultsList">
                        <!-- Probe results will be inserted here -->
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn primary" id="closeProbeResults">Close</button>
                </div>
            </div>
        </div>

        <!-- üì° Elysion Chamber: Narrator Panel -->
        <div class="narrator-panel hidden" id="narratorPanel">
            <div class="narrator-header">
                <h4><i class="fas fa-user-graduate"></i> Usta Anlatƒ±mƒ±</h4>
                <button type="button" class="narrator-toggle" id="narratorToggle" title="Toggle Narrator Panel" aria-label="Toggle narrator panel visibility">
                    <i class="fas fa-chevron-down"></i>
                </button>
            </div>
            <div class="narrator-body" id="narratorBody">
                <div class="narrator-content" id="narratorContent">
                    <p class="narrator-waiting">Waiting for operations...</p>
                </div>
            </div>
        </div>

        <!-- Rename Modal -->
        <div class="modal rename-modal hidden" id="renameModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3><i class="fas fa-edit"></i> Dosya/Klas√∂r Adƒ±nƒ± Deƒüi≈ütir</h3>
                    <button class="modal-close" id="closeRenameModal">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="newFileName">Yeni isim:</label>
                        <input type="text" id="newFileName" placeholder="dosya-adi.txt">
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn secondary" id="cancelRename">ƒ∞ptal</button>
                    <button class="btn primary" id="confirmRename">Deƒüi≈ütir</button>
                </div>
            </div>
        </div>

        <!-- Bulk Operations Panel -->
        <div class="bulk-operations-panel hidden" id="bulkOperationsPanel">
            <div class="bulk-header">
                <span id="selectedCount">0 √∂ƒüe se√ßili</span>
                <button class="bulk-close" id="closeBulkOperations">&times;</button>
            </div>
            <div class="bulk-actions">
                <button class="bulk-action-btn" data-action="delete">
                    <i class="fas fa-trash"></i> Sil
                </button>
                <button class="bulk-action-btn" data-action="move">
                    <i class="fas fa-cut"></i> Ta≈üƒ±
                </button>
                <button class="bulk-action-btn" data-action="copy">
                    <i class="fas fa-copy"></i> Kopyala
                </button>
                <button class="bulk-action-btn" data-action="zip">
                    <i class="fas fa-file-archive"></i> Sƒ±kƒ±≈ütƒ±r
                </button>
            </div>
        </div>

        <!-- Status Bar -->
        <footer class="status-bar">
            <div class="status-left">
                <span class="status-item" id="fileStatus">Hazƒ±r</span>
                <span class="status-separator">|</span>
                <span class="status-item status-warning" id="artistStatus">Artist Mode: Kontrol Ediliyor</span>
            </div>
            <div class="status-right">
                <span class="status-item" id="cursorPosition">Satƒ±r 1, S√ºtun 1</span>
                <span class="status-separator">|</span>
                <span class="status-item" id="fileEncoding">UTF-8</span>
                <span class="status-separator">|</span>
                <span class="status-item" id="lastSaved">Kaydedilmedi</span>
            </div>
        </footer>

    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay hidden" id="loadingOverlay">
        <div class="loading-content">
            <div class="dragon-loader">
                <i class="fas fa-dragon"></i>
            </div>
            <h3>KayraDeniz Kod Canavarƒ±</h3>
            <p>AI sistemi hazƒ±rlanƒ±yor...</p>
            <div class="loading-bar">
                <div class="loading-progress"></div>
            </div>
        </div>
    </div>

    <!-- Go to Line Modal -->
    <div class="modal-overlay hidden" id="gotoLineModal">
        <div class="modal goto-line-modal">
            <div class="modal-header">
                <h3>Satƒ±ra Git</h3>
                <button class="modal-close" id="closeGotoLineModal">&times;</button>
            </div>
            <div class="modal-content">
                <input type="number" id="gotoLineInput" class="goto-line-input" 
                       placeholder="Satƒ±r numarasƒ± girin..." min="1" />
                <div class="modal-actions">
                    <button class="btn btn-primary" id="gotoLineBtn">Git</button>
                    <button class="btn btn-secondary" id="cancelGotoLineBtn">ƒ∞ptal</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts - Using stable Prism.js version without problematic components -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.28.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.28.0/components/prism-javascript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.28.0/components/prism-css.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.28.0/components/prism-markup.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.28.0/components/prism-json.min.js"></script>
    <!-- GitHub REST API Manager -->
    <script src="../github/github-api-manager.js"></script>
    <script src="../github/git-manager.js"></script>
    <!-- GitHub Code Manager (REST API Based) -->
    <script src="github-code-manager.js"></script>
    <!-- Continue Agent UI -->
    <script src="continue-agent-ui.js"></script>
    <!-- MCP Tools Manager -->
    <script src="mcp-tools-manager.js"></script>
    <!-- Kayra Tools System (ES Modules) -->
    <script type="module" src="kayra-tools-architecture.js"></script>
    <script type="module" src="kayra-tools-definitions.js"></script>
    <script type="module" src="kayra-tools-integration.js"></script>
    
    <!-- üî• Continue Agent Style Systems -->
    <script src="multi-edit-system.js"></script>
    <script src="view-diff-system.js"></script>
    <script src="view-repo-map-system.js"></script>

    <!-- üîê Elysion Chamber Systems (Approval Gate + Policy + Events) -->
    <script src="approval-system.js"></script>
    <script src="policy-engine.js"></script>
    <script src="event-bus.js"></script>
    <script src="probe-matrix.js"></script>
    <script src="narrator-agent.js"></script>
    <script src="critic-agent.js"></script>
    <!-- Learning Store loaded dynamically in app.js to prevent re-declaration -->
    <!-- <script src="learning-store.js"></script> -->
    <script src="elysion-chamber-ui.js"></script>
    
    <!-- üéì USTA MODU UI -->
    <script src="usta-modu-ui.js"></script>

    <!-- Main Application -->
    <script src="app.js"></script>

    <!-- üéì USTA MODU REACT (Phase 2) -->
    <script src="usta-modu-react.js"></script>
    
    <!-- üìä LEARNING DASHBOARD (Phase 3) -->
    <script src="learning-dashboard-entry.js"></script>
</body>

</html>